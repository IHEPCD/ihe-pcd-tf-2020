Integrating the Healthcare EnterpriseIHE Patient Care DeviceTechnical Framework SupplementPersonal Health Device Observation Upload(POU)HL7® FHIR® R4Using Resources at FMM Level 2-NormativeRevision 1.1 – Trial Implementation Date:		April 13, 2020Author:	PCD Technical CommitteeEmail:		pcd@ihe.net Please verify you have the most recent version of this document. See here for Trial Implementation and Final Text versions and here for Public Comment versions.
ForewordThis is a supplement to the IHE Patient Care Device Technical Framework V9.0. Each supplement undergoes a process of public comment and trial implementation before being incorporated into the volumes of the Technical Frameworks.This supplement is published on April 13, 2020 for trial implementation and may be available for testing at subsequent IHE Connectathons. The supplement may be amended based on the results of testing. Following successful testing it will be incorporated into the Patient Care Device Technical Framework. Comments are invited and can be submitted at http://www.ihe.net/PCD_Public_Comments.  This supplement describes changes to the existing technical framework documents. “Boxed” instructions like the sample below indicate to the Volume Editor how to integrate the relevant section(s) into the relevant Technical Framework volume.Amend Section X.X by the following:Where the amendment adds text, make the added text bold underline. Where the amendment removes text, make the removed text bold strikethrough. When entire new sections are added, introduce with editor’s instructions to “add new text” or similar, which for readability are not bolded or underlined.General information about IHE can be found at www.ihe.net.Information about the IHE Patient Care Device domain can be found at ihe.net/IHE_Domains.Information about the organization of IHE Technical Frameworks and Supplements and the process used to create them can be found at http://ihe.net/IHE_Process and http://ihe.net/Profiles.The current version of the Patient Care Device Technical Framework can be found at http://ihe.net/Technical_Frameworks.
CONTENTSIntroduction to this Supplement	5IHE Technical Frameworks General Introduction	79	Copyright Licenses	79.1	Copyright of Base Standards	79.1.1	DICOM (Digital Imaging and Communications in Medicine)	79.1.2	HL7 (Health Level Seven)	79.1.3	LOINC (Logical Observation Identifiers Names and Codes)	79.1.4	SNOMED CT (Systematized Nomenclature of Medicine -- Clinical Terms)	810	Trademark	8IHE Technical Frameworks General Introduction Appendices	9Appendix A – Actor Summary Definitions	9Appendix B – Transaction Summary Definitions	9Appendix D – Glossary	10Volume 1 – Profiles	12Copyright Licenses	12Domain-specific additions	129 Personal Health Device Observation Upload (POU) Profile	139.1 POU Actors, IHE Transactions, and Content Modules	139.1.1 Actor Descriptions and Actor Profile Requirements	169.1.1.1 Device Observation Reporter Requirements	169.1.1.2 Device Observation Consumer Requirements	179.2 POU Actor Transaction Combinations	179.3 POU Required Actor Groupings	189.4 POU Overview	189.4.1 Concepts	209.4.2 Use Cases	219.4.2.1 Use Case #1: Chronic Disease Management	219.4.2.2 Use Case #2: Post-Operative Recovery	239.5 POU Security Considerations	249.6 POU Cross Profile Considerations	25Appendices to Volume 1	26Volume 2n – Transactions	273.1 Communicate FHIR PHD Data [PCH-01]	273.1.1 Scope	273.1.2 Actor Roles	273.1.3 Referenced Standards	283.1.4 Messages	283.1.4.1 Communicate FHIR PHD Data	283.1.4.2 Acknowledgement	303.1.5 Security Considerations	313.1.5.1 Security Audit Considerations	313.1.5.2 Device Observation Reporter Specific Security Considerations	313.1.5.3 Device Observation Consumer Specific Security Considerations	313.2 Communicate RESTful FHIR PHD Data [PCH-02]	323.2.1 Scope	323.2.2 Actor Roles	323.2.3 Referenced Standards	333.2.4 Messages	333.2.4.1 Communicate RESTful FHIR PHD Data	333.2.4.2 Acknowledgement	353.2.5 Security Considerations	363.2.5.1 Security Audit Considerations	363.2.5.2 Device Observation Reporter Specific Security Considerations	363.2.5.3 Device Observation Consumer Specific Security Considerations	36Appendices to Volume 2	37Appendix A – POU Usage of FHIR Resource and RESTful FHIR API	38A.1 PHD Patient Resource	38A.2 PHD Device Resource	39A.3 PHG Device Resource	39A.4 PHD Base Observation Profile	39A.5 PHD Numeric Observation Resource	40A.6 PHD Compound Numeric Observation Resource	40A.7 PHD Coded Enumeration Observation Resource	40A.8 PHD Bits Enumeration Observation Resource	40A.9 PHD String Enumeration Observation Resource	41A.10 Phd Rtsa Observation Resource	41A.11 PHD Coincident Time Stamp Observation Resource	41A.12 Profiled FHIR Resources Personal Health Device Implementation Guide Links	41A.13 Referenced Standards	43Volume 2 Namespace Additions	43Volume 3 – Content Modules	445 Namespaces and Vocabularies	44Appendices to Volume 3	45Volume 3 Namespace Additions	45
Introduction to this SupplementWhenever possible, IHE profiles are based on established and stable underlying standards. However, if an IHE domain determines that an emerging standard has high likelihood of industry adoption, and the standard offers significant benefits for the use cases it is attempting to address, the domain may develop IHE profiles based on such a standard. During Trial Implementation, the IHE domain will update and republish the IHE profile as the underlying standard evolves.Product implementations and site deployments may need to be updated in order for them to remain interoperable and conformant with an updated IHE profile.This POU Profile incorporates content from Release 4 of the emerging HL7® FHIR® specification. HL7 describes FHIR Change Management and Versioning at https://www.hl7.org/fhir/versions.html.HL7 provides a rating of the maturity of FHIR content based on the FHIR Maturity Model (FMM): level 0 (draft) through N (Normative). See http://hl7.org/fhir/versions.html#maturity. The FMM levels for FHIR content used in this profile are:FHIR Content(Resources, ValueSets, etc.FMM LevelPatientNDevice2ObservationNBundleNPHD-IG-defined Value SetsCodeableConcept11073MDCQuantity11073MDCRange11073MDCString11073MDCMDCNotObjectASN1AttributeASN1MeasurementPHD-IG-defined Code SystemContinuaDeviceIdentifiersASN1ToHL7ContinuaHFSContinuaPHDPoCD-IG-defined Code Systemmeasurement-statusThis supplement describes a standardized means of reporting measurements taken by Personal Healthcare devices as FHIR resources. This supplement does not specify how these measurements are obtained.The FHIR representation of the measurement data follows the FHIR Personal Health Device Implementation Guide (PHD IG). The PHD IG uses one code system defined by the FHIR Point of Care Device Implementation Guide (PoCD IG).IHE Technical Frameworks General IntroductionThe IHE Technical Framework General Introduction is shared by all of the IHE domain technical frameworks. Each technical framework volume contains links to this document where appropriate.9 Copyright LicensesIHE International hereby grants to each Member Organization, and to any other user of these documents, an irrevocable, worldwide, perpetual, royalty-free, nontransferable, nonexclusive, non-sublicensable license under its copyrights in any IHE profiles and Technical Framework documents, as well as any additional copyrighted materials that will be owned by IHE International and will be made available for use by Member Organizations, to reproduce and distribute (in any and all print, electronic or other means of reproduction, storage or transmission) such IHE Technical Documents.The licenses covered by this Copyright License are only to those copyrights owned or controlled by IHE International itself. If parts of the Technical Framework are included in products that also include materials owned or controlled by other parties, licenses to use those products are beyond the scope of this IHE document and would have to be obtained from that other party.9.1 Copyright of Base StandardsIHE technical documents refer to and make use of a number of standards developed and published by several standards development organizations. All rights for their respective base standards are reserved by these organizations. This agreement does not supersede any copyright provisions applicable to such base standards. Copyright license information for frequently referenced base standards is provided below.9.1.1 DICOM (Digital Imaging and Communications in Medicine)DICOM® is the registered trademark of the National Electrical Manufacturers Association for its standards publications relating to digital communications of medical information.9.1.2 HL7 (Health Level Seven)HL7®, Health Level Seven®, CDA®, FHIR®, and the FHIR [FLAME DESIGN] ® are registered trademarks of Health Level Seven International.Health Level Seven, Inc. has granted permission to IHE to reproduce tables from the HL7 standard. The HL7 tables in this document are copyrighted by Health Level Seven, Inc. All rights reserved. Material drawn from these documents is credited where used.9.1.3 LOINC (Logical Observation Identifiers Names and Codes)LOINC® is registered United States trademarks of Regenstrief Institute, Inc.9.1.4 SNOMED CT (Systematized Nomenclature of Medicine -- Clinical Terms)Some IHE Profiles incorporate SNOMED® CT, which is used by permission of the International Health Terminology Standards Development Organisation. SNOMED CT© was originally created by the College of American Pathologists. SNOMED CT is a registered trademark of the International Health Terminology Standards Development Organisation, all rights reserved.10 TrademarkIHE® and the IHE logo are trademarks of the Healthcare Information Management Systems Society in the United States and trademarks of IHE Europe in the European Community. They may only be used with the written consent of the IHE International Board Operations Committee, which may be given to a Member Organization in broad terms for any use that is consistent with the IHE mission and operating principles.IHE Technical Frameworks General Introduction AppendicesThe IHE Technical Framework General Introduction Appendices are components shared by all of the IHE domain technical frameworks. Each technical framework volume contains links to these documents where appropriate.Update the following appendices to the General Introduction as indicated below. Note that these are not appendices to this domain’s Technical Framework (TF-1, TF-2, TF-3 or TF-4) but rather, they are appendices the IHE Technical Frameworks General Introduction located here.Appendix A – Actor Summary DefinitionsAdd the following new or modified actors to the IHE Technical Frameworks General Introduction Appendix A:No new actors.Appendix B – Transaction Summary DefinitionsAdd the following new or modified transactions to the IHE Technical Frameworks General Introduction Appendix B:New (or modified) Transaction Name and NumberDefinitionCommunicate FHIR PHD Data [PCH-01]Communicates a complete FHIR Bundle to the appropriate consumer over RESTful POST transports, secured using TLS, and authenticated using oAuth2 bearer tokens.Communicate-RESTful FHIR PHD Data [PCH-02] Delivers FHIR resources to a FHIR server using the RESTful FHIR API, is secured using TLS, and authenticated using oAuth2 bearer tokens.Appendix D – GlossaryAdd the following new or updated glossary terms to the IHE Technical Frameworks General Introduction Appendix D.New (or modified) Glossary TermDefinitionAcronymApplication Hosting DeviceOld name for a PCHA PHG, now deprecated.AHDComplete FHIR BundleIn the POU Profile, the complete FHIR Bundle is a transaction Bundle whose resources contain no references to resources external to the Bundle. The transaction Bundle shall also be able to be uploaded to a RESTful FHIR server by this profile’s Content Creator.FHIR profileProfiles as used and defined by FHIR. The ‘FHIR’ is used to distinguish between the term ‘profile’ as used in FHIR versus that used in IHE.FHIR serverA computing system which stores and exchanges data elements called resources through an application programming interface (API) known as the FHIR Restful API (https://www.hl7.org/fhir/http.html)FHIR transactionTransaction defined by FHIR. The ‘FHIR’ is used to distinguish between the term ‘transaction’ as used in RESTful FHIR versus that used in IHE.IEEE-11073-20601Optimized Exchange Protocol. A transport-agnostic packet-based protocol for exchanging health data. Currently used only over local transports, which are:1. USB DevClass - USB Implementers Forum (2007-11), Universal Serial Bus Device Class Definition for Personal Healthcare Devices, Release 1.0, plus Errata (15 February 2008), Personal Healthcare section. https://www.usb.org/document-library/personal-healthcare-rev-102.  ZigBee HCP - ZigBee Alliance, Health Care Profile Specification, version 1.0, revision 15. https://docs.zigbee.org/zigbee-docs/dcn/10/docs-10-5619-00-0zhc-zigbee-health-care-profile-1-0-public.pdf3. Bluetooth HDP - Bluetooth SIG, Health Device Profile, version 1.1. https://www.bluetooth.org/docman/handlers/DownloadDoc.ashx?doc_id=260864&vId=2900954.  NFC PHDC - NFC Forum (2013), Personal Health Device Communication 1.0. http://www.nfc-forum.org/specs/spec_licenseIHE transactionTransaction defined by IHE. The ‘IHE’ is used to distinguish between the term ‘transaction’ as used in IHE versus that used in FHIR.Personal Connected Health Alliance A membership-based HIMSS Innovation Company, accelerates technical, business and social strategies necessary to advance personal connected health and is committed to improving health behaviors and chronic disease management via connected health technologies. PCHA publishes the Continua Guidelines. PCHAPCHA DataData from PHD devices that is compliant with the IEEE/ISO 11073-20601 domain information model, and hence contains sufficient information to generate the non-demographic components and to satisfy time requirements for the generated FHIR resources.Personal Health DeviceDevices such as pedometers, glucometers, blood pressure cuffs, thermometers, etc.PHDPersonal Health GatewayCollects PHD data and delivers it to, often remotely located, destinations. Formerly known as an AHD.PHGRESTful POSTTerminology used by the POU to indicate the use of only the RESTful create (HTTP POST) operation of the data to a server. It is not fully ‘RESTful’ in the sense that no further RESTful exchanges or RESTful hierarchies need to be supported by the server. An important aspect of the use of this term in the POU is that there is no assumed persistence of the uploaded data on the server.RESTful FHIRTerminology used by the FHIR standard to indicate compliance to the FHIR RESTful API and FHIR resource model. See http://build.fhir.org/conformance-rules.html. An additional important aspect of the use of this term in the POU is that the FHIR server persists uploaded resources and thus once a resource is uploaded, it generally does not need to be uploaded again.Volume 1 – ProfilesCopyright LicensesAdd the following to the IHE Technical Frameworks General Introduction Copyright section:NADomain-specific additionsNAAdd new Section 9
9 Personal Health Device Observation Upload (POU) ProfileThe Personal Health Device Observation Upload Profile describes a standardized means of representing personal healthcare device (PHD) data as FHIR resources. PHDs are typically used by patients at home. The POU is anticipated to supplement any IHE profile or activity requiring a patient to use PHDs.Examples of PHDs are weight scales, pulse oximeters, blood pressure cuffs, and glucose monitors. PHDs tend to be portable, often run on batteries, and have limited computational resources. In that respect, these devices typically use low footprint binary protocols that connect to a local data collector using a variety of personal networking protocols, such as Bluetooth®, ZigBee®, and USB connections. They may not even have a clock to keep track of the date and time that a measurement is taken.Collectors are applications built into devices such as a set-top box attached to a cable or local area network, or a mobile device such as a cellular phone, tablet or personal computer. These applications collect data from one or more PHDs and send them on to the healthcare provider either directly or via a health information exchange.However, certain types of sensors are starting to be incorporated on mobile phones and related wearables allowing the merger of the PHD and collector unit into a single entity. Such devices may both take the measurement and create FHIR resources from it.The POU does not specify how the PHD data is obtained, but only how it is represented in FHIR and transmitted to some endpoint where it is accessible for use. The transmission to this endpoint may involve ‘health information exchanges’ or it may be direct.Health information exchanges in this context are servers used to coordinate and manage large numbers of remotely located collectors and transform and transmit the collected data into the desired content for the consumer. Since the health information exchange is not required to persist data in the management and translation process it reduces the possibility of exposing personal health information.9.1 POU Actors, IHE Transactions, and Content ModulesThis section defines the actors, transactions, and content modules in this profile. General definitions of actors are given in the Technical Frameworks General Introduction Appendix A at http://ihe.net/Technical_Frameworks.The intent of the POU is to standardize the representation of PHD Data and the IHE transactions necessary to get the PHD data to a healthcare service provider. This standardization ensures plug and play operation for each component participating in the POU from the generator of the FHIR resources to the EHR document reader used by the health care provider.The POU Profile uses the following actors: 1. Device Observation Reporter that generates and transfers a complete FHIR Bundle from the PHD data to a Device Observation Consumer. A complete FHIR Bundle contains all the resources pertinent to the measurements and all resources in the Bundle only have references to resources within the Bundle.2. Device Observation Consumer that receives the complete FHIR Bundle from the Device Observation Reporter. In the POU, the Device Observation Consumer is typically grouped with a Device Observation Reporter that uploads the FHIR data from the complete FHIR Bundle to a RESTful FHIR server.The POU defines the following IHE transactions:1. Communicate FHIR PHD Data [PCH-01] transaction communicates a complete FHIR Bundle to the appropriate consumer over RESTful POST transports, secured using TLS, and authenticated using oAuth2 bearer tokens.2. Communicate RESTful FHIR PHD Data [PCH-02] transaction delivers FHIR resources to a FHIR server using the RESTful FHIR API, is secured using TLS, and authenticated using oAuth2 bearer tokens.Figure 9.1-1 shows the actors and actor groupings directly involved in this POU Profile and the relevant IHE transactions between them.Figure 9.1-1: POU Actor DiagramFigure 9.1-2 shows the upload implementation options of the POU. In some sense the figure indicates a ‘workflow’ though all the stages except for the patient taking the measurement are automated. How the PHD data is obtained is not specified.Figure 9.1-2: POU ‘Flow’ DiagramTable 9.1-1 lists the IHE transactions for each actor directly involved in the POU. To claim compliance with the POU, an actor shall support all required transactions (labeled “R”) and may support the optional transactions (labeled “O”).Table 9.1-1: POU Profile - Actors and TransactionsActorsTransactions OptionalityReferenceDevice Observation ReporterCommunicate FHIR PHD Data [PCH-01] R (see Note 1)PCD TF-2n: 3.1Communicate RESTful FHIR PHD Data [PCH-02]PCD TF-2n: 3.2Device Observation ConsumerCommunicate FHIR PHD Data [PCH-01]R (see Note 1)PCD TF-2n: 3.1Communicate RESTful FHIR PHD Data [PCH-02]PCD TF-2n: 3.2Note 1: Must support one of the two transactions.9.1.1 Actor Descriptions and Actor Profile RequirementsThe POU Profile defines two actors:1. The Device Observation Reporter is an actor that reports PHD Data (sensor device observations) to a Device Observation Consumer2. The Device Observation Consumer is an actor that receives PHD Data (sensor device observations) from a Device Observation Consumer.This section covers requirements on these actors not directly covered by the transactions defined in this profile.Both actors shall meet the security requirements from H812.5 as listed below. Note: These requirements do not mean that implementations must always use these features; this may be the case for example, when the DOR and DOC are within the same institution on a secured network and the risks for security breaches are considered to be too low to warrant the overheard of authentication and TLS.9.1.1.1 Device Observation Reporter RequirementsA Device Observation Reporter SHALL be synchronized to a time source.Note: This time source is expected to be UTC aligned.A Device Observation Reported SHALL ensure correct time stamps in the PHD Data that are aligned with the time line of this time source. This requirement implies that timestamps in PHD Data come from a contiguous time line.Note: the way such time stamp corrections could/should be done is described in [Continua PHD IG].A Device Observation Reporter SHALL only upload PHD Data that meets the requirements of the [Continua PHD IG]. Note: An important element in the POU is that PHD data is expected to be obtained electronically (not manually entered by a patient) and the PHD data must possess sufficient information (time stamp, details about the sensor device) to be converted to a form that can be uploaded. PHD data sourced from devices certified to the IEEE 11073 20601 protocol are guaranteed to have this information. A Device Observation Reporter SHALL meet the security requirements of a PHG as described in [H.812.5]. This means support for oAuth2 bearer token authentication using client or resource owner credentials and Transport Level Security (TLS). The Device Observation Reported SHALL prevent duplication of data when using the RESTful FHIR API. Note: one way the DOR can prevent data duplication is to use the RESTful FHIR conditional create FHIR transactions on all resources that could potentially create duplicates. Observation resources, Device and Patient resources could potentially already exist on the server. For efficiency, the POU encourages the Device Observation Reporter (DOR) supporting the Communicate RESTful FHIR PHD Data transaction to use some type of filtering mechanism to prevent duplicates in lieu of conditional creates. For example, if the DOR is using transaction Bundles, since the uploaded Device resource describing a PHD is static, after a first-time upload using a conditional create, the DOR can use the returned logical id for the Device in the Observation.device resource elements in subsequent transaction Bundles and skip the inclusion of the Device resource. As an alternative, the DOR could query the server for the existence of the resource before uploading.A Device Observation Reporter SHALL support at least one of the two transactions defined by this profile:• Communicate FHIR PHD Data Bundle Transaction [PCH-01]• Communicate RESTful FHIR PHD Data Transaction [PCH-02]9.1.1.2 Device Observation Consumer RequirementsA Device Observation Consumer SHALL meet the security requirements of an HFS as described in [H.812.5]. This means support for oAuth2 bearer token authentication using client or resource owner credentials and Transport Level Security (TLS).A Device Observation Consumer SHALL support at least one of the two transactions defined by this profile:• Communicate FHIR PHD Data Data Bundle Transaction [PCH-01]• Communicate RESTful FHIR PHD Data Transaction [PCH-02]Note that a Device Observation Consumer supporting [PCH-01] can also easily support [PCH-02] since a FHIR Bundle is also a resource that can be posted to a FHIR endpoint. The difference is that in the [PCH-02] transaction the response should be a simple confirm and not include all received and processed FHIR resources present in the bundle it received.References:• [H812.5] – Continua Design Guidelines - H.812.5 FHIR Observation Upload• [FHIR PHD IG] – Personal Health Device Data Implementation Guide, http://build.fhir.org/ig/HL7/PHD/ 9.2 POU Actor Transaction CombinationsTransactions that may be selected for each actor in this profile are listed in the Table 9.2-1. Table 9.2-1: POU – Available Transactions for each ActorActorTransaction OReferenceDevice Observation ReporterCommunicate FHIR PHD Data [PCH-01] (see Note 1)PCD TF-2n: 3.1Communicate RESTful FHIR PHD Data [PCH-02] (see Note 1) PCD TF-2n: 3.2Device Observation ConsumerCommunicate FHIR PHD Data [PCH-01] (see Note 1)PCD TF-2n: 3.1Communicate RESTful FHIR PHD Data [PCH-02] (see Note 1) PCD TF-2n: 3.2Note 1: Each actor must support at least one of the listed transactions.9.3 POU Required Actor Groupings An actor from this POU Profile (Column 1) shall implement all of the required transactions in the POU in addition to all of the transactions required for the grouped actor (Column 2). Section 9.5 describes some optional groupings that may be of interest for security.Table 9.3-1: POU - Required Actor GroupingsPOU ActorActor to be grouped withReferenceContent Bindings ReferenceNone9.4 POU OverviewThe POU Profile describes a set of standardized means to deliver patient health measurements from PHDs to a health care provider. The delivery route can take one of several paths. Two scenarios are shown.Figure 9.4-1: POU Operational DiagramIn this case, there are several monitored patients, each with their own set of sensor devices and a local collector of those sensor observations. Each collector then sends its clinical data to a single back end server that generates the FHIR resources for one of several consumers.Figure 9.4-2: POU Operational DiagramIn this case, there are once again several monitored patients, each with their own set of sensor devices and a local collector of those sensor observations. However, each collector sends the data directly to a FHIR server for consumption.9.4.1 ConceptsThe POU as defined in this document relies on a standardized and generic means of representing PHD data in FHIR format. The generic representation is based upon the type of value (scalar, vector, code) versus the measurement type (temperature, weight, miles run, etc.). PHD data consists of one of the following six type of values:• A single scalar or number such as a temperature, weight, miles run, pulse rate, etc. How this value type is mapped to FHIR is given here: http://build.fhir.org/ig/HL7/PHD/NumericObservationProfile.html• A vector consisting of multiple numbers such as the x, y, z components of an acceleration or the systolic, diastolic, or mean components of a blood pressure.* How this value type is mapped to FHIR is given here: http://build.fhir.org/ig/HL7/PHD/CompoundNumericObservationProfile.html• A code such as the meal context. How this value type is mapped to FHIR is given here: http://build.fhir.org/ig/HL7/PHD/CodedEnumerationObservationProfile.html• A binary state or event. How this value type is mapped to FHIR is given here: http://build.fhir.org/ig/HL7/PHD/BITsEnumerationObservationProfile.html• A periodic sequence of scalars. How this value type is mapped to FHIR is given here: http://build.fhir.org/ig/HL7/PHD/RtsaObservationProfile.html• A human readable string (very rare). How this value type is mapped to FHIR is given here: http://build.fhir.org/ig/HL7/PHD/StringEnumerationObservationProfile.html*One could always argue that each vector measurement component be reported as a scalar and that is a viable alternative. However, that decision has been made by the designers of the IEEE 11073 104xx specializations and the POU follows those decisions.An alternative approach would be to create FHIR resources based upon what the measurement is; thus, a temperature measurement would be mapped differently than a glucose concentration measurement. Given that the number of different scalar measurements reported by PHDs is large, the alternative approach puts a great burden on implementers that wish to handle many measurements. With the generic approach, an implementation need only handle six cases, which one of the six cases can be determined by looking at the FHIR meta.profile element.The concept of generic mapping is central to the POU and is often difficult and confusing to readers who are not familiar with it. More information about the generic modelling approach can be found in the Personal Health Device Implementation Guide here http://build.fhir.org/ig/HL7/PHD/GenericModel.html and here http://build.fhir.org/ig/HL7/PHD/ProfileConsumers.html.It should be pointed out that the IEEE 11073 standards have always used generic measurement modelling, and the Point of Care Device Implementation Guide takes this same generic approach.9.4.2 Use CasesThe POU is designed to fulfill any situation where measurements taken by a patient using PHDs is needed. An example would be a care plan where part of that care requires a patient to be monitored for certain conditions, but that monitoring can be done by having the patient take measurements using one of more PHDs while at home. 9.4.2.1 Use Case #1: Chronic Disease ManagementChronic Disease Management allows compromised individuals managing disorders such as diabetes, hypertension, heart disease, sleep apnea, etc. to go through their daily lives with as minimal intrusion as possible. The POU Profile allows a greater number of such people to live as normal a life as possible.9.4.2.1.1 Chronic Disease Management Use Case DescriptionPeople can become physically and medically compromised for several reasons. However, in many cases, these people would be able to live a fairly normal and functional life with minimal intrusion if much of the monitoring could be performed on the person without visits to a professional facility. The POU Profile covers the transfer of measurements from the patient’s home to the healthcare provider at a pre-determined frequency. The health care provider can then decide whether additional monitoring and thus a visit to the provider are warranted.9.4.2.1.2 Chronic Disease Management Process FlowA patient suffers from hypertension and is at high risk for stroke. The patient needs to take certain medications each day and ideally needs to lose some weight. The health care professional’s institution already has the infrastructure to create, read, and distribute IHE compatible Electronic Heath Records (EHRs) in the form of FHIR resources. The health care professional provides the patient with a blood pressure cuff, a weight scale, and a medication monitor containing next month’s daily medication doses. All the devices are PCHA compliant thus the PHD data is known to contain the necessary information to be mapped to FHIR following the POU. A set top box is provided that collects the measurements from these devices and implements a Device Observation Reporter. The set top box is pre-configured to communicate with a server application supporting a Device Observation Consumer and subsequent Device Observation Reporter that supports the Communicate RESTful FHIR PHD Data transaction and dispatches the data to a FHIR server. This application has been installed on a system at the health care provider’s facility. The server application has a web interface that allows the health care provider to generate an account for a given patient. The account will contain information about the given patient that the health care facility requires for its record keeping. A user-name and password are required to access this account and that information has been configured into the patient’s set top box. When the server application receives data from this patient it knows to activate the Device Observation Reporter that generates FHIR resources that can be delivered to a FHIR server the health care provider can access.The patient has been instructed on how to use the devices and to plug in the set top box in the area where the devices are to be used. Each morning the patient is to take a blood pressure reading, a weight measurement, and the daily medications. When the patient performs these tasks, a PCHA compliant message is sent to the set top box which gives a beep of approval when the measurement is received and converted to complete FHIR bundle. The first time this is done, the set top box requests the back-end server application for an oAuth token using the user name and password configured by the health care provider’s facility. If correct, the set top box receives the token from the server application and sends FHIR bundle authenticated with the oAuth token. The server application validates the token and if valid, extracts the FHIR resources which it then sends to the FHIR Server following the RESTful FHIR API, where the health care provider can now use them. Since the backend server and the FHIR server are co-located within the same institution, no oAuth procedures are considered necessary.In this manner the health care provider can monitor the patient and make medical decisions based on the uploaded observations, allowing the patient to go about his/her daily tasks with minimal intrusion. This monitoring does not preclude the patient from directly contacting the health care provider.Figure 9.4.2.1.2-1: Basic Process Flow in POU Profile9.4.2.2 Use Case #2: Post-Operative RecoveryRemote Post-Operative recovery allows a patient to recover from the effects of surgery or other traumatic procedures (such as chemotherapy) amongst family and friends in a familiar environment.9.4.2.2.1 Post-Operative Recovery Use Case DescriptionA patient that has had surgery, or chemotherapy, or radiation treatment, or has undergone some other medically traumatic event will often need to be monitored for potential complications. In some cases (such as a broken bone) the potential for complications is so low that it is standard procedure that recovery is at home. In many other cases monitoring is needed but it is fairly simple, and any complications that might be detected from the monitoring will not be acute. Nevertheless, the patient is either required to stay at the facility to receive this monitoring or is required to frequently visit the facility to be monitored, both of which are inconvenient and expensive. If the patient can be provided with remote monitoring equipment, recovery can take place in the home and visits to the facility take place only when warranted.9.4.2.2.2 Post-Operative Recovery Process FlowA patient has just undergone heart surgery. The surgery appears to have gone well and the patient shows no signs of complications. The care giver provides the patient with a PCHA-compliant weight scale, blood pressure cuff, pulse oximeter, and medication monitor, and installs a PCHA complaint personal health gateway (PHG) on the patient’s mobile phone. The PHG supports a Device Observation Reporter supporting a Communicate RESTful FHIR PHD Data transaction and is configured to transfer the data to an application running on the facilities back end FHIR server. The health care staff has configured an account for the patient on this server. The care giver instructs the patient to take a weight measurement, blood pressure measurement, and pulse oximeter reading twice a day along with medication instructions; once in the morning, and once in the evening. Taking additional weight measurements during other times of the day is encouraged. The patient is instructed to first turn on the mobile device, start the installed PHG application, and then use the three provided devices to take the measurements. Medications are dispensed from a special pill box. The patient is given a few practice sessions with the devices, the use of the medication dispenser, and mobile phone application. Everything goes smoothly though it takes some extra effort to get used to taking blood pressure measurements. The patient sees the measurements displayed and medications taken on the mobile device and an indication that the data is dispatched to the care provider. The care provider then accesses the data from the examination room terminal and shows the patient the sent measurements.Once home the patient follows the care giver’s instructions; turns on the mobile device, starts the PHG application, and then takes the three instructed measurements and the prescribed medications. All devices transfer the measurements and medication indications to the mobile device.The mobile device then converts the PHD data to FHIR resources and uploads the resources to a FHIR server using the oAuth authenticated RESTful FHIR API.9.5 POU Security ConsiderationsPHD data collectors may store both sensor data, as well as personally identifiable information, and will communicate it to upstream systems. These devices are subject to theft and loss. The POU requires the support of encryption of any upstream network transmissions using Transport Layer Security and authentication of the user via oAuth2 bearer tokens using either client or resource owner credentials. Further protection of Personal Health Information can be obtained by only populating the Patient resource with opaque identifiers which can only be mapped to a personally identifiable information by appropriate personnel at the health care provider’s institution. The POU also supports a Device Observation Reporter Option where no patient information needs to reside on the hosting device. In this case, the Device Observation Reporter is provided the logical id of the Patient resource by some out-of-band means and a Patient resource is never created.Back office, departmental and EHR systems used by the healthcare provider to access the sensor data or to translate it to a persistent, human readable format will need to be further secured. RESTful FHIR by itself does not support any security operations, thus the POU requires that the Device Observation Consumer of the Device Observation Reporter’s FHIR uploads supports oAuth2 client or resource owner credential authentication over TLS. The FHIR server will need to be secured in the same manner as any other EHR system containing personal health data.9.6 POU Cross Profile ConsiderationsNAAppendices to Volume 1 NoneVolume 2n – Transactions3.1 Communicate FHIR PHD Data [PCH-01]3.1.1 ScopeThis IHE transaction is used to transfer collected patient measurement data from a Device Observation Reporter to a Device Observation Consumer in the form of a complete FHIR Bundle.3.1.2 Actor RolesFigure 3.1.2-1: Use Case DiagramTable 3.1.2-1: Actor RolesActor:Device Observation ReporterRole:This actor is responsible for packaging patient measurement data into a complete FHIR Bundle and sending it to a Device Observation Consumer Actor:Device Observation ConsumerRole:This actor receives the FHIR Bundle from one or more Device Observation ReportersSince the Device Observation Reporter (DOR) does not receive any patient demographic information from the PHD, at least a patient identifier and authorization code for each patient are required to create a compliant Patient resource. How this information is obtained is not defined by the POU. Only the owner of the dictionary that maps these identifiers to a person needs to be concerned about personal health information. However, the DOR may include personal information in the Patient resource; that option is a business decision. How the DOR implementation maps the patient information to the PHD data is implementation dependent. The person number provided by some PHDs may be used or there may be some biosensor involved. A DOR implementation may also provide a filter such that only certain measurements are forwarded in the FHIR Bundle. An example might be the exclusion of streaming pulse oximeter measurements and retention of spot measurements. Using such a filter is implementation dependent and outside the scope of the POU, but clearly use of the filter must allow the generation of a compliant FHIR Bundle.3.1.3 Referenced StandardsThe Communicate FHIR PHD Data transaction is specified in the H.812.5 – FHIR Observation Upload, H.812 Services Interface Common Design Guidelines, and H.812.3 Capability Exchange documents. The PCHA guidelines are sufficient for implementation of the Communicate FHIR PHD Data transaction.3.1.4 MessagesThe diagram below illustrates the Communicate FHIR PHD Data transaction. How one obtains the authentication token is not specified by the POU.Figure 3.1.4-1: Communicate FHIR PHD Data TransactionThe Capability Exchange and oAuth exchanges as used in this IHE transaction are described in H.812-5.3.1.4.1 Communicate FHIR PHD Data The Communicate FHIR PHD Data transaction used in the POU uses a RESTful POST to transfer the FHIR Bundle to the Device Observation Consumer. A RESTful POST is an HTTP POST operation with the complete FHIR Bundle as the body. The Device Observation Consumer and Device Observation Reporter Actors shall support TLS security and oAuth authentication for this IHE transaction transport as specified in H.812-5. It is this component of the message that transfers the measurement data as a FHIR Bundle to the Device Observation Consumer. The security and authentication requirements are present since this transaction is not locally bound like the communication between a PHD and PHG. In the POU, it is the IHE transaction that is responsible for transferring the medical data from the remote location of the patient to an enterprise or third-party server which can be located anywhere there is connectivity. Typically, this connectivity would be the internet and it could occur from an unsecured public network.3.1.4.1.1 Trigger EventsThe typical trigger event is the passing of a collection of measurement data from a PHD to the Device Observation Reporter. How this PHD measurement data is obtained is not specified by the POU.3.1.4.1.2 Message SemanticsThe RESTful POST transport implementation of this message contains both an oAuth identity token and the complete FHIR Bundle which represents the measurement sequence taken upon the patient. The message consists of a simple HTTP POST containing the oAuth token to the URL specified by the Device Observation Consumer obtained through Capability Exchange. The body of the message is the FHIR Bundle. The oAuth identity token must be recognized by the Device Observation Consumer for acceptance of the message but how that identity token is obtained is a business trust relationship decision. The Device Observation Consumer may be an oAuth Authentication Server, or the Device Observation Reporter may obtain the token from a third-party service trusted by the Device Observation Consumer, or the token may be obtained by an out of band means.This message also represents an attempt to pass responsibility of the data from the Device Observation Reporter to the Device Observation Consumer. Once delivered, there is no further responsibility of the Device Observation Reporter to persist the information. In addition, the Device Observation Reporter shall assume that the Device Observation Consumer does not persist any of the uploaded information, thus the requirement that the FHIR bundle contain the Patient and Device resources every time, even if they have been uploaded in previous bundles and have not changed.However, the POU places further restrictions on the complete FHIR Bundle• The Bundle shall be a FHIR transaction Bundle• Only the create, conditional create, and conditional update FHIR transactions shall be specified in the Bundle• The Patient, PHD Device, PHG Device, are sent every time• The Patient, PHD Device, and PHG Device resource entries shall specify the conditional create FHIR transaction or conditional update* on the identifier value and system elements. The population of these elements is specified in the Personal Health Device Implementation Guide in the PhdPatient, PhdDevice, and PhgDevice profiles listed here http://build.fhir.org/ig/HL7/PHD/profiles.html.• Observation resource entries created from stored data shall specify the conditional create FHIR transaction on the identifier value element. The creation of the identifier element is specified in the Personal Health Device Implementation Guide in the various observation profiles listed here http://build.fhir.org/ig/HL7/PHD/profiles.html.*A conditional update FHIR transaction on the identifier value and system elements is discouraged. The reason is that if this Bundle is uploaded to a RESTful FHIR server, the existing Patient or Device resources will go into the history archives, and not all servers support searches and GETs of resources by history even if the references themselves contain the history. Consequently, when one searches for the Patient or Device resources referenced in Observations referencing the original Patient or Device resource, the search will retrieve the latest version and not the original, even though the Observations point to the correct historical version.The reason for the FHIR transaction requirements is that this Bundle can then be uploaded unmodified to a FHIR server supporting the RESTful FHIR API. This Bundle allows an H&FS supporting a Device Observation Consumer to also support a Device Observation Reporter (DOR) supporting the Communicate RESTful FHIR PHD Data IHE transaction. This Bundle provides the DOR implementation with sufficient information to pre-filter duplicates in the same manner a DOR that works directly with PHD data can.If the destination of the Bundle is to an endpoint that is only interested in the resources, the FHIR transactions specified in the entry elements of the Bundle can be ignored.3.1.4.1.3 Expected ActionsThe expected behavior by the Device Observation Consumer (DOC) upon reception of this message is to first authenticate the identity of the sender and if authenticated, indicate to the Device Observation Reporter whether or not the transfer is successful by responding with an appropriate acknowledgement.The DOC may transfer the FHIR Bundle to a grouped Device Observation Reporter that dispatches the information using another IHE transaction, for example a PCD transaction containing a V2 message or any other IHE actor that can make use of this data and dispatch it to consumer actors.3.1.4.2 AcknowledgementThe Acknowledgement is a response to the Communicate FHIR Data message and indicates the status of the IHE transaction. Sending this message indicates whether or not responsibility for the data is transferred from the Device Observation Reporter to the Device Observation Consumer. A successful transfer indicates that the Device Observation Consumer has taken responsibility for the data.3.1.4.2.1 Trigger EventsThe Acknowledgement is triggered by the reception of the Communicate FHIR Data at the Device Observation Consumer.3.1.4.2.2 Message SemanticsThis message consists of an HTTP response indicating the status of the IHE transaction.3.1.4.2.3 Expected ActionsUpon a successful transaction, the Device Observation Reporter is free to release any resources associated with the measurement data.3.1.5 Security ConsiderationsThe Communicate FHIR Data transaction is subject to any of the security threats of IHE PHDs that utilize the public internet and unsecure public networks. To assure some level of consistent security, this IHE transaction requires, at minimum, support for TLS encryption and the support of oAuth Bearer Token authentication in this transaction. It is possible that this IHE transaction occurs within the context of a secured network. The business use case may choose not to take these extra precautions.3.1.5.1 Security Audit ConsiderationsThere are no auditing requirements in this IHE transaction. 3.1.5.2 Device Observation Reporter Specific Security ConsiderationsThe primary risk of the Device Observation Reporter is the compromising of personal data via theft of the uploading device. The Device Observation Reporter is often a personal mobile device such as an Android phone or tablet and these devices may have extensive personal information; including financial. The Device Observation Reporter implementation will store medical data on failed transfers, and it may also store the medical data for review. Since the unit is often in the home, it may fall outside of any regional safeguards that might be in place for health care providers and associated supporting partners that will handle personal medical data. On the other hand, given that the range of data sensitivity in a remote patient monitoring situation is so great, security requirements are only required on the IHE transactions. Encryption of local data, and password, fingerprint, facial recognition, etc. access to the unit hosting the Device Observation Reporter software is left up to the implementation.If personal health data is of concern in this part of the use case role, a dedicated upload implementation in a set-top box containing only the opaque institutional identity codes and institutional patient identifiers is an alternative. Such a box would not allow the storage of any information that can identify the person.3.1.5.3 Device Observation Consumer Specific Security ConsiderationsThe Device Observation Consumer is typically resident on a third-party remote server or a server located at the institution of the health care provider. This actor has all the security risks that any medical data stored in a professional environment faces. It is likely subject to regional safeguards for the handling of personal medical data.3.2 Communicate RESTful FHIR PHD Data [PCH-02]3.2.1 ScopeThis IHE transaction is used to transfer collected patient measurement data to a Device Observation Consumer in the form of FHIR resources using certain exchanges in the RESTful FHIR API http://build.fhir.org/http.html.3.2.2 Actor RolesFigure 3.2.2-1: Use Case DiagramTable 3.2.2-1: Actor RolesActor:Device Observation ReporterRole:This actor is responsible for converting patient measurement data into FHIR resources and uploading it to a Device Observation Consumer using the RESTful FHIR APIActor:Device Observation ConsumerRole:This actor receives the FHIR Resources from one or more Device Observation Reporters and persists them on a “FHIR” Server.Since the Device Observation Reporter (DOR) does not receive any patient demographic information from the PHD, at least a patient identifier and authorization code for each patient are required to create a compliant Patient resource. How this information is obtained is not defined by the POU. Only the owner of the dictionary that maps these identifiers to a person needs to be concerned about personal health information. However, the DOR may include personal information in the Patient resource; that option is a business decision. How the DOR implementation maps the patient information to the PHD data is implementation dependent. The person number provided by some PHDs may be used or there may be some biosensor involved. A DOR implementation may also provide a filter such that only certain measurements are forwarded. An example might be the exclusion of streaming pulse oximeter measurements and retention of spot measurements. Using such a filter is implementation dependent and outside the scope of the POU, but clearly use of the filter must allow the generation of FHIR resources with all their proper resource references.3.2.3 Referenced StandardsThe Communicate RESTful FHIR PHD Data transaction is specified by the FHIR guidelines http://build.fhir.org/http.html with additional requirements specified in the PCHA H.812.5 – FHIR Upload, PCHA H.812 WAN IF Common Certified Device Class Guidelines, and PCHA H.812.3 Capability Exchange documents.3.2.4 MessagesThe diagram below illustrates the Communicate RESTful FHIR PHD Data transaction. How one obtains the authentication token is not specified by the POU.Figure 3.2.4-1: Communicate RESTful FHIR PHD Data TransactionThe Capability Exchange and oAuth exchanges and used in this IHE transaction are described in H.812-5.3.2.4.1 Communicate RESTful FHIR PHD DataThe Communicate RESTful FHIR PHD Data transaction specified in the POU uses a restricted set of the RESTful FHIR API to upload Patient, Device, and Observation resources individually or in the context of a transaction Bundle. The allowed RESTful FHIR API exchanges and the creation of the resources is given in Appendix C. The Device Observation Consumer and Device Observation Reporter Actors shall support TLS security and oAuth authentication for this IHE transaction..It is this transaction that transfers the measurement data as one or more FHIR resources to the Device Observation Consumer. The security and authentication requirements are present since this IHE transaction is not locally bound like the communication between a PHD and PHG. In the POU, it is the IHE transaction that is responsible for transferring the PHD medical data from the remote location of the patient to an enterprise or third-party server which can be located anywhere where there is connectivity. Typically, this connectivity would be the internet and it could occur from an unsecured public network.3.2.4.1.1 Trigger EventsThe typical trigger event is the passing of a collection of PHD measurement data to the Device Observation Reporter. How this PHD is obtained it not specified by the POU.3.2.4.1.2 Message SemanticsThe RESTful FHIR transport implementation of this message contains both an oAuth identity token and the FHIR resource which represents a measurement (single upload*) or measurement sequence (Bundled upload) taken upon the patient. The message consists of an HTTP POST or PUT containing the oAuth token to the URL supporting the RESTful FHIR API. The URL is likely obtained through Capability Exchange. The body of the message is either a Patient, Device, Observation, or Bundle resource. The oAuth identity token must be recognized by the Device Observation Consumer for acceptance of the message but how that identity token is obtained is a business trust relationship decision. The Device Observation Consumer may be an oAuth Authentication Server, or the Device Observation Reporter may obtain the token from a third-party service trusted by the Device Observation Consumer, or the token may be obtained by an out of band means.This message also represents an attempt to pass responsibility of the data from the Device Observation Reporter to the Device Observation Consumer. Once delivered, there is no further responsibility of the Device Observation Reporter to persist the information used to create the resource(s). In this transaction the Device Observation Consumer is assumed to persist the data.*It should be noted that uploads of single resources can be a challenging task if the resources reference other Observation resources. All Observations generated from measurements containing a time stamp from the PHD will reference a Coincident Time Stamp Observation. The uploader must either upload this resource first and obtain the logical id in the response before uploading subsequent Observations or use a FHIR transaction Bundle and temporary ids as specified in the FHIR standard. The second approach is often easier to implement.The POU places the following restrictions on the RESTful FHIR API and resources• The Bundle, when used, shall be a FHIR transaction Bundle• The Device Observation Reporter (DOR) shall either assure that the Patient, PHD Device, and PHG Device resource does not exist on the server (perhaps by doing a GET) or the DOR shall use the conditional create or conditional** update transaction on the identifier value. The population of these elements is specified in the Personal Health Device Implementation Guide in the PhdPatient, PhdDevice, and PhgDevice FHIR profiles listed here http://build.fhir.org/ig/HL7/PHD/profiles.html.• Observation resource entries created from stored data shall specify the conditional create FHIR transaction on the identifier value element. The creation of the identifier element is specified in the Personal Health Device Implementation Guide in the various observation FHIR profiles listed here http://build.fhir.org/ig/HL7/PHD/profiles.html.• The upload should attempt to filter duplicate resources instead of relying on the conditional create and conditional update FHIR transactions. Filtering will minimize bandwidth and reduce overhead on the server.**A conditional update FHIR transaction on the identifier value and system elements is discouraged. The reason is that the existing Patient or Device resources will go into the history archives, and not all servers support searches and GETs of resources by history even if the references themselves contain the history. Consequently, when one searches for the Patient or Device resources referenced in Observations referencing the original Patient or Device resource, the search will retrieve the latest version and not the original, even though the Observations point to the correct historical version.3.2.4.1.3 Expected ActionsThe expected behavior by the Device Observation Consumer (DOC) upon reception of the upload message is to first authenticate the identity of the sender and if authenticated, indicate to the Device Observation Reporter whether or not the transfer is successful by responding with an appropriate acknowledgement.3.2.4.2 AcknowledgementThe Acknowledgement is a response to the Communicate RESTful FHIR PHD message and indicates the status of the IHE transaction. The body of the response will contain information about the actions taken by server according to the FHIR specification. One important piece of information the Device Observation Report can obtain from the response is the logical id of the uploaded resource. The logical id can be used in the Observation resources of subsequent uploads. Sending this message indicates whether or not responsibility for the data is transferred from the Device Observation Reporter to the Device Observation Consumer. A successful transfer indicates that the Device Observation Consumer has taken responsibility for the data.3.2.4.2.1 Trigger EventsThe Acknowledgement is triggered by the reception of the Communicate RESTful FHIR PHD Data at the Device Observation Consumer.3.2.4.2.2 Message SemanticsThis message consists of an HTTP response indicating the status of the IHE transaction and a body containing information about the transaction according to the FHIR specification.3.2.4.2.3 Expected ActionsUpon a successful transaction, the Device Observation Reporter is free to release any resources associated with the measurement data used to create the uploaded resource(s).3.2.5 Security ConsiderationsThe Communicate RESTful FHIR PHD Data IHE transaction is subject to any of the security threats of IHE transactions that utilize the public internet and unsecure public networks. To assure some level of consistent security, this IHE transaction requires, at minimum, support for TLS encryption and the support of oAuth Bearer Token authentication. It is possible that this IHE transaction occurs within the context of a secured network. The business use case may choose not to take these extra precautions.3.2.5.1 Security Audit ConsiderationsThere are no auditing requirements in this IHE transaction. 3.2.5.2 Device Observation Reporter Specific Security ConsiderationsThe primary risk of the Device Observation Reporter is the compromising of personal data via theft of the uploading device. The Device Observation Reporter is often a personal mobile device such as an Android phone or tablet and these devices may have extensive personal information; including financial. The Device Observation Reporter implementation will store medical data on failed transfers, and it may also store the medical data for review. Since the unit is often in the home, it may fall outside of any regional safeguards that might be in place for health care providers and associated supporting partners that will handle personal medical data. On the other hand, given that the range of data sensitivity in a remote patient monitoring situation is so great, requirements are only required on the IHE transaction. Encryption of local data, and password, fingerprint, facial recognition, etc. access to the unit hosting the Device Observation Reporter software is left up to the implementation.If personal health data is of concern in this part of the use case role, a dedicated upload implementation in a set-top box containing only the opaque institutional identity codes and institutional patient identifiers is an alternative. Such a box would not allow the storage of any information that can identify the person.3.2.5.3 Device Observation Consumer Specific Security ConsiderationsThe Device Observation Consumer is typically resident on a third-party remote server or a server located at the institution of the health care provider. This actor has all the security risks that any medical data stored in a professional environment faces. It is likely subject to regional safeguards for the handling of personal medical data.Appendices to Volume 2Appendix A – POU Usage of FHIR Resource and RESTful FHIR APIThe Device Observation Reporter supporting the Communicate RESTful FHIR PHD Data [PCH-02] transaction requires the use of the Patient, Device, Observation, and optionally Bundle resources. Use of any other resource is out of scope for the POU. The elements used in these resources shall be compatible with FHIR version 4.0.0. The information that is required to be entered into the FHIR profiled resources, except the Patient resource, comes from the PHD via the 11073-20601 exchange protocol or mapped equivalent; no additional entry by the user of the PHD shall be required. The creation of these resources from the PHD and PHG data is detailed in the Personal Health Device Implementation Guide (PHD IG) http://build.fhir.org/ig/HL7/PHD. The mapping in this guide is also appropriate for the creation of the complete bundle resource in the Communicate FHIR PHD Data [PCH-01] transaction.DORs following the POU shall only use the following RESTful FHIR operations for uploading:• Create• Conditional Create• Conditional UpdateHealth and Fitness Servers supporting the Communicate RESTful FHIR PHD Data transaction shall support create, conditional create, and conditional update of the RESTful FHIR API. It shall support the Patient, Device, and Observation resources as well as the FHIR transaction Bundle.A.1 PHD Patient ResourcePatient information is a highly sensitive issue. To support protection of Personal Health Information (PHI) the POU Profile supports an option where the Device Observation Reporter (DOR) is given the logical id (not the identifier) of a Patient resource by the service provider. How this logical id is obtained is not specified by the POU Profile. In that case, the DOR shall not upload a Patient resource. It shall use the logical id in all resources that require a reference to a Patient resource. The Device Observation Consumer (DOC) shall not reject such a resource due to the Patient resource reference, but it does not mean that the referenced Patient resource is accessible from the DOC.If the logical id is not provided by the service provider, the DOR is responsible for generating the resource and uploading the resource in such a manner that duplicate resources are not created. The DOR must either assure the resource does not exist on the server before using a create operation or use a conditional create or conditional update operation on the identifier system and value elements. The only element required by the PHD patient FHIR profile is the identifier such as the XDSb patient and enterprise identifiers. These values are obtained from the service provider. How these values are obtained is not specified by the POU. Since no additional information is required in the case where a Patient resource is generated by the DOR, this option also allows protection of PHI as long as the enterprise’s dictionary mapping patient identifiers to patients is secured. The construction of the Patient resource is given here http://build.fhir.org/ig/HL7/PHD/PhdPatientProfile.html.A link to the structure definition is given by http://build.fhir.org/ig/HL7/PHD/PhdPatient.html.A.2 PHD Device ResourcePHDs expose their specializations, an IEEE EUI-64 system identifier, manufacturer name, model number, production specification (such as serial number and firmware version) information, as well as properties about its real-time clock if the PHD has a real-time clock. PCHA compliant PHDs also expose regulation and certification data.PHDs are static devices. The Device Observation Reporter (DOR) shall assure that duplicate resources are not created. The DOR must either assure the resource does not exist on the server before using a create operation or use a conditional create or conditional update operation on the identifier system and value elements.All Observation resources generated from the PHD measurements reference this Device resource in the Observation.device element. The construction of the PHD Device resource is given here http://build.fhir.org/ig/HL7/PHD/PhdDeviceProfile.html.A link to the structure definition is given by http://build.fhir.org/ig/HL7/PHD/PhdDevice.html.A.3 PHG Device ResourceThis resource is used to map the PHG properties. PHGs also have an IEEE EUI-64 system identifier, manufacturer name, model number, production specification, real-time clock properties, regulation, and certification information. PHGs are static. The Device Observation Reporter (DOR) shall assure that duplicate resources are not created. The DOR must either assure the resource does not exist on the server before using a create operation or use a conditional create or conditional update operation on the identifier system and value elements.All Observation resources generated by the PHG Content Creator are referenced through the HL7 gateway extension element in the Observation. The construction of the PHG Device resource is given here http://build.fhir.org/ig/HL7/PHD/PhgDeviceProfile.html.A link to the structure definition is given by http://build.fhir.org/ig/HL7/PHD/PhgDevice.html.A.4 PHD Base Observation ProfileThe Base Observation Profile is not an instantiable resource but defines all the features that are common to the FHIR profiled Observation resources. A link to the structure definition is given by http://build.fhir.org/ig/HL7/PHD/BaseObservationProfile.html. The mapping of the common elements from the PHD measurement metrics is given here http://build.fhir.org/ig/HL7/PHD/BaseObservationProfile.html.PHDs can have stored data and some PHDs have no means of deleting the stored data and will resend the old measurements every connection. The Device Observation Reporter (DOR) shall prevent resource duplication by either assuring the resource does not already exist before performing a create operation or it shall use the conditional create operation on the identifier value. The generation of the identifier value for data duplication prevention is specified in the various Phd Observation profiles in the Personal Health Device Implementation Guide. Links to the individual profiles are given in the following sections. In some situations, the measurements are known to be new; for example, live measurements or streamed measurements with no time stamps. In these cases, the DOR can use the create operation without concern for creating duplicates. The DOR may also invoke algorithms to filter out duplicate data instead of relying on the conditional create transaction. Such filtering reduces bandwidth and saves the server the overhead of processing the conditional create transaction.A.5 PHD Numeric Observation ResourceThis FHIR profile is used when the PHD sends a metric measurement that is a scalar such as a body temperature or glucose concentration. Scalar measurements are the most common type of PHD measurement. A link to the structure definition is given by http://build.fhir.org/ig/HL7/PHD/PhdNumericObservation.html. The mapping to the Observation value-related elements from the PHD measurement metrics is given here http://build.fhir.org/ig/HL7/PHD/NumericObservationProfile.html.A.6 PHD Compound Numeric Observation ResourceThis FHIR profile is used when the PHD sends a metric measurement that is a vector and requires one or more scalar values to represent. Examples would be the x, y, z components of an acceleration or the systolic, diastolic, and mean components of a blood pressure. A link to the structure definition is given by http://build.fhir.org/ig/HL7/PHD/PhdCompoundNumericObservation.html. The mapping to the Observation elements from the PHD measurement metrics is given here http://build.fhir.org/ig/HL7/PHD/CompoundNumericObservationProfile.html.A.7 PHD Coded Enumeration Observation ResourceThis FHIR profile is used when the PHD sends a metric measurement that is an IEEE 11073 10101 code such as a glucose meal context. In IEEE language these types of measurements are referred to as ‘enumerations’ since they are finite and fixed. A link to the structure definition is given by http://build.fhir.org/ig/HL7/PHD/PhdCodedEnumerationObservation.html. The mapping to the Observation value-related elements from the PHD measurement metrics is given here http://build.fhir.org/ig/HL7/PHD/CodedEnumerationObservationProfile.html.A.8 PHD Bits Enumeration Observation ResourceThis FHIR profile is used when the PHD sends a metric measurement that is an IEEE 11073 BITs field such as a device and sensor status. IEEE 11073 BITs measurements represent one or more states and/or events that can occur simultaneously. A link to the structure definition is given by http://build.fhir.org/ig/HL7/PHD/PhdBitsEnumerationObservation.html. This kind of measurement poses certain challenges in HL7 and requires special treatment. More information is given at http://build.fhir.org/ig/HL7/PHD/ASN1BITsCodeSystem.html and http://build.fhir.org/ig/HL7/PHD/ProfileConsumers.html#measurement-values-that-are-events-or-states. The mapping to the Observation elements from the PHD measurement metrics is given here http://build.fhir.org/ig/HL7/PHD/BITsEnumerationObservationProfile.html. A.9 PHD String Enumeration Observation ResourceThis FHIR profile is used when the PHD sends an enumeration metric measurement that is a human readable string such as the cardio specialization exercise program name. A link to the structure definition is given by http://build.fhir.org/ig/HL7/PHD/PhdStringEnumerationObservation.html. The mapping to the Observation elements from the PHD measurement metrics is given here http://build.fhir.org/ig/HL7/PHD/StringEnumerationObservationProfile.html.A.10 Phd Rtsa Observation ResourceThis FHIR profile is used when the PHD sends a real-time-sample array (waveform) metric measurement such as an ECG trace. A link to the structure definition is given by http://build.fhir.org/ig/HL7/PHD/PhdRtsaObservation.html. The mapping to the Observation elements from the PHD measurement metrics is given here http://build.fhir.org/ig/HL7/PHD/RtsaObservationProfile.html.A.11 PHD Coincident Time Stamp Observation ResourceThis FHIR profile is used for the coincident time stamp. The coincident time stamp is essentially a ‘measure’ of the PHD’s current time at the current time of the PHG. This information, along with the static time information of the PHD and PHG is used to potentially correct and map the PHD measurement time stamps to local time plus UTC offset. More information about the Coincident Time Stamp is given here http://build.fhir.org/ig/HL7/PHD/CoincidentTimeStamp.html. The generation of the Coincident Time Stamp Observation from the PHD and PHG time clocks is given here http://build.fhir.org/ig/HL7/PHD/CoincidentTimeStampObservationProfile.html.A link to the structure definition is given by http://build.fhir.org/ig/HL7/PHD/PhdCoincidentTimeStampObservation.html.A.12 Profiled FHIR Resources Personal Health Device Implementation Guide LinksThe link to the Personal Health Device Implementation Guide home page is given by http://build.fhir.org/ig/HL7/PHD/. The following table gives the links to the structure definitions and PHD data to FHIR mapping instructions for each of the profiled resources:Table A.12-1: Links to Profiled FHIR ResourcesProfiled ResourceInformationLinksPHD Patientstructure definitionhttp://build.fhir.org/ig/HL7/PHD/PhdPatient.htmlMapping detailshttp://build.fhir.org/ig/HL7/PHD/PhdPatientProfile.htmlPHD Devicestructure definitionhttp://build.fhir.org/ig/HL7/PHD/PhdDevice.htmlMapping detailshttp://build.fhir.org/ig/HL7/PHD/PhdDeviceProfile.htmlPHG Devicestructure definitionhttp://build.fhir.org/ig/HL7/PHD/PhgDevice.htmlMapping detailshttp://build.fhir.org/ig/HL7/PHD/PhgDeviceProfile.htmlPHD Base Observationstructure definitionhttp://build.fhir.org/ig/HL7/PHD/PhdBaseObservation.htmlMapping detailshttp://build.fhir.org/ig/HL7/PHD/BaseObservationProfile.htmlPHD Numeric Observationstructure definitionhttp://build.fhir.org/ig/HL7/PHD/PhdNumericObservation.htmlMapping detailshttp://build.fhir.org/ig/HL7/PHD/NumericObservationProfile.htmlPHD Compound Numeric Observationstructure definitionhttp://build.fhir.org/ig/HL7/PHD/PhdCompoundNumericObservation.htmlMapping detailshttp://build.fhir.org/ig/HL7/PHD/CompoundNumericObservationProfile.htmlPHD Coded Enumeration Observationstructure definitionhttp://build.fhir.org/ig/HL7/PHD/PhdCodedEnumerationObservation.htmlMapping detailshttp://build.fhir.org/ig/HL7/PHD/CodedEnumerationObservationProfile.htmlPHD Bits Enumeration Observationstructure definitionhttp://build.fhir.org/ig/HL7/PHD/PhdBitsEnumerationObservation.htmlMapping detailshttp://build.fhir.org/ig/HL7/PHD/BITsEnumerationObservationProfile.htmlPHD String Enumeration Observationstructure definitionhttp://build.fhir.org/ig/HL7/PHD/PhdStringEnumerationObservation.htmlMapping detailshttp://build.fhir.org/ig/HL7/PHD/StringEnumerationObservationProfile.htmlPHD Coincident Time Stamp Observationstructure definitionhttp://build.fhir.org/ig/HL7/PHD/PhdCoincidentTimeStampObservation.htmlMapping detailshttp://build.fhir.org/ig/HL7/PHD/CoincidentTimeStampObservationProfile.htmlThe following links in the PHD Implementation Guide may also be of interest to those implementing some element of this PHD Observation Upload IHE Profile:• Technical background giving an overview of IEEE 11073 20601 constructs and its relation to FHIR resources for implementers of Remote Patient Monitoring Personal Health Gateways (PHGs): http://build.fhir.org/ig/HL7/PHD/TechnicalImplementationGuidance.html• Description of the contents of the PHG-generated FHIR resources for consumers of the FHIR resources: http://build.fhir.org/ig/HL7/PHD/ProfileConsumers.html. This page does not require knowledge of the IEEE protocols.A.13 Referenced StandardsAll standards which are referenced in this document are listed below with their common abbreviation, full title, and link to the standard.Table A.13-1: FHIR - Referenced StandardsAbbreviationTitleURLFHIRFast Healthcare Interoperability Resourceshttp://hl7.org/fhir/R4/FHIR PHD IGPersonal Health Device Implementation Guidehttp://build.fhir.org/ig/HL7/PHD/H.812Services Interface Common Design Guidelineshttp://www.pchalliance.org/continua-design-guidelinesH.812.3Capability Exchange Capabilityhttp://www.pchalliance.org/continua-design-guidelinesH.812.5FHIR Observation Uploadhttp://www.pchalliance.org/continua-design-guidelinesVolume 2 Namespace AdditionsAdd the following terms to the IHE General Introduction Appendix G: codeSystem codeSystemName Description 2.16.840.1.113883.6.24ISO/IEEE 11073-10101 Medical Device Communication NomenclatureSee http://www.hl7.org/oid/index.cfm?Comp_OID=2.16.840.1.113883.6.24 for more details. Volume 3 – Content ModulesNot applicable.5 Namespaces and VocabulariesAdd to Section 5 Namespaces and VocabulariesNoneAdd to Section 5.1.1 IHE Format CodesNone Appendices to Volume 3NoneVolume 3 Namespace AdditionsAdd the following terms to the IHE Namespace:NoneIHE PCD Technical Framework Supplement –Personal Health Device Observation Upload (POU) ______________________________________________________________________________1__________________________________________________________________________Rev. 1.1 – 2020-04-13	19	                       Copyright © 2020: IHE International, Inc.Template Rev. 10.3Copyright © 2020: IHE International, Inc.